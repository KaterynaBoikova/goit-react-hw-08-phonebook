(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[3],{140:function(e,t,c){"use strict";c.r(t);var n,r,a,o,s,u,i=c(0),b=c.n(i),j=c(28),l=c.n(j),O=c(15),d=c(50),g=c(4),f=c(27),h=c(76),p=c.n(h),v=c(5),m=c(13),x=c(17),C=Object(g.c)([],(n={},Object(v.a)(n,x.a.fetchContactsSuccess,(function(e,t){return t.payload})),Object(v.a)(n,x.a.addContactSuccess,(function(e,t){return[].concat(Object(d.a)(e),[t.payload])})),Object(v.a)(n,x.a.deleteContactSuccess,(function(e,t){return e.filter((function(e){return e.id!==t.payload}))})),n)),_=Object(g.c)("",Object(v.a)({},x.a.changeFilter,(function(e,t){return t.payload}))),S=Object(g.c)(!1,(r={},Object(v.a)(r,x.a.fetchContactsRequest,(function(){return!0})),Object(v.a)(r,x.a.fetchContactsSuccess,(function(){return!1})),Object(v.a)(r,x.a.fetchContactsError,(function(){return!1})),Object(v.a)(r,x.a.addContactRequest,(function(){return!0})),Object(v.a)(r,x.a.addContactSuccess,(function(){return!1})),Object(v.a)(r,x.a.addContactError,(function(){return!1})),Object(v.a)(r,x.a.deleteContactRequest,(function(){return!0})),Object(v.a)(r,x.a.deleteContactSuccess,(function(){return!1})),Object(v.a)(r,x.a.deleteContactError,(function(){return!1})),r)),k=Object(m.b)({contacts:C,filter:_,loading:S}),E=c(6),y={name:null,email:null},N=Object(g.c)(y,(a={},Object(v.a)(a,E.a.registerSuccess,(function(e,t){return t.payload.user})),Object(v.a)(a,E.a.loginSuccess,(function(e,t){return t.payload.user})),Object(v.a)(a,E.a.logoutSuccess,(function(){return y})),Object(v.a)(a,E.a.currentUserSuccess,(function(e,t){return t.payload})),a)),R=Object(g.c)("",(o={},Object(v.a)(o,E.a.registerSuccess,(function(e,t){return t.payload.token})),Object(v.a)(o,E.a.loginSuccess,(function(e,t){return t.payload.token})),Object(v.a)(o,E.a.logoutSuccess,(function(){return null})),o)),U=Object(g.c)("",(s={},Object(v.a)(s,E.a.registerSuccess,(function(){return!0})),Object(v.a)(s,E.a.loginSuccess,(function(){return!0})),Object(v.a)(s,E.a.registerError,(function(){return!1})),Object(v.a)(s,E.a.loginError,(function(){return!1})),Object(v.a)(s,E.a.logoutSuccess,(function(){return!1})),Object(v.a)(s,E.a.currentUserError,(function(){return!1})),Object(v.a)(s,E.a.currentUserSuccess,(function(){return!0})),s)),q=Object(g.c)("",(u={},Object(v.a)(u,E.a.registerError,(function(e,t){return t.payload})),Object(v.a)(u,E.a.loginError,(function(e,t){return t.payload})),Object(v.a)(u,E.a.logoutError,(function(e,t){return t.payload})),Object(v.a)(u,E.a.currentUserError,(function(e,t){return t.payload})),u)),L=Object(m.b)({user:N,isLoggedIn:U,token:R,error:q}),I=Object(d.a)(Object(g.d)({serializableCheck:{ignoredActions:[f.a,f.f,f.b,f.c,f.d,f.e]}})),w={key:"loggedIn",storage:p.a,whitelist:["token"]},D=Object(g.a)({reducer:{userData:Object(f.g)(w,L),phonebook:k},middleware:I}),A={store:D,persistor:Object(f.h)(D)},T=c(77),z=c(24),M=(c(99),c(40)),B=c(41),F=c(43),J=c(42),P=c(8),Y=c(65),H=c.n(Y),K=(c(85),c(157)),W=c(44),G=function(e){return e.userData.isLoggedIn},Q=function(e){return e.userData.user.email},V=c(19),X=c.n(V),Z=c(2),$=Object(O.b)((function(e){return{isLoggedIn:G(e)}}))((function(e){var t=e.isLoggedIn;return Object(Z.jsxs)("nav",{children:[Object(Z.jsx)(z.b,{to:"/",exact:!0,className:X.a.nav_link,activeClassName:X.a.nav_link_active,children:"Home"}),t&&Object(Z.jsx)(z.b,{to:"/contacts",className:X.a.nav_link,activeClassName:X.a.nav_link_active,children:"Contacts"})]})})),ee=c(163),te=c(161),ce=c(162),ne=c(82),re=c.n(ne),ae=c(52),oe=c.n(ae),se={onBtnClick:W.a.userLogout},ue=Object(O.b)((function(e){return{userMail:Q(e)}}),se)((function(e){var t=e.userMail,c=e.onBtnClick;return Object(Z.jsxs)("div",{className:oe.a.userDiv,children:[Object(Z.jsx)(K.a,{}),Object(Z.jsx)(ee.a,{className:oe.a.avatar,children:Object(Z.jsx)(re.a,{})}),Object(Z.jsx)(te.a,{className:oe.a.userName,children:t}),Object(Z.jsx)(ce.a,{type:"button",color:"inherit",onClick:c,children:"Logout"})]})})),ie=function(){return Object(Z.jsxs)("div",{children:[Object(Z.jsx)(z.b,{to:"/register",exact:!0,className:X.a.nav_link,activeClassName:X.a.nav_link_active,children:"Register"}),Object(Z.jsx)(z.b,{to:"/login",className:X.a.nav_link,activeClassName:X.a.nav_link_active,children:"Login"})]})},be=c(57),je=function(e){Object(F.a)(c,e);var t=Object(J.a)(c);function c(){return Object(M.a)(this,c),t.apply(this,arguments)}return Object(B.a)(c,[{key:"render",value:function(){return Object(Z.jsx)(be.a,{sectionCN:X.a.sectionNav,children:Object(Z.jsxs)("header",{className:X.a.header,children:[Object(Z.jsx)($,{}),this.props.isUserLoggedIn?Object(Z.jsx)(ue,{}):Object(Z.jsx)(ie,{})]})})}}]),c}(i.Component),le=Object(O.b)((function(e){return{isUserLoggedIn:G(e)}}))(je),Oe=c(30),de=c(51),ge=Object(O.b)((function(e){return{isLoggedIn:G(e)}}))((function(e){var t=e.component,c=e.isLoggedIn,n=e.redirectTo,r=Object(de.a)(e,["component","isLoggedIn","redirectTo"]);return Object(Z.jsx)(P.b,Object(Oe.a)(Object(Oe.a)({},r),{},{render:function(e){return c?Object(Z.jsx)(t,Object(Oe.a)({},e)):Object(Z.jsx)(P.a,{to:n})}}))})),fe=Object(O.b)((function(e){return{isLoggedIn:G(e)}}))((function(e){var t=e.component,c=e.isLoggedIn,n=e.redirectTo,r=Object(de.a)(e,["component","isLoggedIn","redirectTo"]);return Object(Z.jsx)(P.b,Object(Oe.a)(Object(Oe.a)({},r),{},{render:function(e){return c&&r.restricted?Object(Z.jsx)(P.a,{to:n}):Object(Z.jsx)(t,Object(Oe.a)({},e))}}))})),he=Object(i.lazy)((function(){return c.e(1).then(c.bind(null,190))})),pe=Object(i.lazy)((function(){return c.e(4).then(c.bind(null,195))})),ve=Object(i.lazy)((function(){return Promise.all([c.e(0),c.e(5)]).then(c.bind(null,191))})),me=Object(i.lazy)((function(){return Promise.all([c.e(0),c.e(2)]).then(c.bind(null,193))})),xe=function(e){Object(F.a)(c,e);var t=Object(J.a)(c);function c(){return Object(M.a)(this,c),t.apply(this,arguments)}return Object(B.a)(c,[{key:"componentDidMount",value:function(){this.props.getStorageUser()}},{key:"render",value:function(){return Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)(K.a,{}),Object(Z.jsx)(le,{}),Object(Z.jsx)(i.Suspense,{fallback:Object(Z.jsx)(H.a,{type:"ThreeDots",color:"teal",height:130,width:130,style:{textAlign:"center"}}),children:Object(Z.jsxs)(P.d,{children:[Object(Z.jsx)(fe,{path:"/",exact:!0,component:he}),Object(Z.jsx)(fe,{path:"/register",restricted:!0,redirectTo:"/contacts",component:ve}),Object(Z.jsx)(fe,{path:"/login",restricted:!0,redirectTo:"/contacts",component:me}),Object(Z.jsx)(ge,{path:"/contacts",redirectTo:"/login",component:pe})]})})]})}}]),c}(i.Component),Ce=Object(O.b)(null,(function(e){return{getStorageUser:function(){return e(W.a.getCurrentUser())}}}))(xe);l.a.render(Object(Z.jsx)(b.a.StrictMode,{children:Object(Z.jsx)(O.a,{store:A.store,children:Object(Z.jsx)(T.a,{loading:null,persistor:A.persistor,children:Object(Z.jsx)(z.a,{children:Object(Z.jsx)(Ce,{})})})})}),document.getElementById("root"))},17:function(e,t,c){"use strict";var n=c(4),r=Object(n.b)("contacts/fetchContactsRequest"),a=Object(n.b)("contacts/fetchContactsSuccess"),o=Object(n.b)("contacts/fetchContactsError"),s=Object(n.b)("contacts/addContactRequest"),u=Object(n.b)("contacts/addContactSuccess"),i=Object(n.b)("contacts/addContactError"),b=Object(n.b)("contacts/deleteContactRequest"),j=Object(n.b)("contacts/deleteContactSuccess"),l=Object(n.b)("contacts/deleteContactError"),O=Object(n.b)("contacts/changeFilter");t.a={fetchContactsRequest:r,fetchContactsSuccess:a,fetchContactsError:o,addContactRequest:s,addContactSuccess:u,addContactError:i,deleteContactRequest:b,deleteContactSuccess:j,deleteContactError:l,changeFilter:O}},19:function(e,t,c){e.exports={header:"AppNav_header__34y_i",sectionNav:"AppNav_sectionNav__3rRY-",nav_link:"AppNav_nav_link__sLewY",nav_link_active:"AppNav_nav_link_active__K9qBw"}},44:function(e,t,c){"use strict";var n=c(29),r=c.n(n),a=c(6);r.a.defaults.baseURL="https://connections-api.herokuapp.com";var o=function(e){r.a.defaults.headers.common.Authorization="Bearer ".concat(e)},s=function(){r.a.defaults.headers.common.Authorization=""};t.a={userRegister:function(e){return function(t){var c={name:e.name,email:e.email,password:e.password};t(a.a.registerRequest()),r.a.post("/users/signup",c).then((function(e){var c=e.data;o(c.token),t(a.a.registerSuccess(c))})).catch((function(e){return t(a.a.registerError(e.message))}))}},userLogin:function(e){return function(t){var c={email:e.email,password:e.password};t(a.a.loginRequest()),r.a.post("/users/login",c).then((function(e){var c=e.data;o(c.token),t(a.a.loginSuccess(c))})).catch((function(e){return t(a.a.registerError(e.message))}))}},userLogout:function(){return function(e){e(a.a.logoutRequest()),r.a.post("/users/logout").then((function(){s(),e(a.a.logoutSuccess())})).catch((function(t){return e(a.a.logoutError(t.message))}))}},getCurrentUser:function(){return function(e,t){var c=t().userData.token;c&&(o(c),e(a.a.currentUserRequest()),r.a.get("/users/current").then((function(t){var c=t.data;return e(a.a.currentUserSuccess(c))})).catch((function(t){return e(a.a.currentUserError(t.message))})))}}}},52:function(e,t,c){e.exports={userDiv:"UserMenu_userDiv__2b3BJ",userName:"UserMenu_userName__1NrI5",avatar:"UserMenu_avatar__o4hi4"}},57:function(e,t,c){"use strict";c(0);var n=c(142),r=c(2);t.a=function(e){var t=e.sectionCN,c=e.containerCN,a=e.children;return Object(r.jsx)("section",{className:t,children:Object(r.jsx)(n.a,{maxWidth:"lg",className:c,children:a})})}},6:function(e,t,c){"use strict";var n=c(4),r=Object(n.b)("contacts/loginRequest"),a=Object(n.b)("contacts/loginSuccess"),o=Object(n.b)("contacts/loginError"),s=Object(n.b)("contacts/registerRequest"),u=Object(n.b)("contacts/registerSuccess"),i=Object(n.b)("contacts/registerError"),b=Object(n.b)("contacts/logoutRequest"),j=Object(n.b)("contacts/logoutSuccess"),l=Object(n.b)("contacts/logoutError"),O=Object(n.b)("contacts/currentUserRequest"),d=Object(n.b)("contacts/currentUserSuccess"),g=Object(n.b)("contacts/currentUserError");t.a={loginRequest:r,loginSuccess:a,loginError:o,logoutError:l,logoutRequest:b,logoutSuccess:j,registerError:i,registerRequest:s,registerSuccess:u,currentUserError:g,currentUserRequest:O,currentUserSuccess:d}},99:function(e,t,c){}},[[140,6,7]]]);
//# sourceMappingURL=main.60a4afd6.chunk.js.map